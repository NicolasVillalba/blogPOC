<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous"/>
    <title>Title</title>
    <style>
        input[type="text"].s, textarea.s {
            margin: 20px auto;
            width: 80%;
        }
    </style>
</head>
<body>
    <div class="pure-g">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
            <form class="pure-form pure-form-stacked">
                <fieldset>
                    <legend style="font-size: 2em">Create A New Post</legend>
                    <input id="title" class="s" type="text" placeholder="title" name="title"/>
                    <textarea id="text" class="s" rows="3" name="text" ></textarea>
                    <input class="s" type="text" placeholder="author" name="author"/>
                    <label style="padding:10px;text-align: center" for="Draft">
                        <input id="draft" type="checkbox" name="draft"/> Draft?
                    </label>
                    <button id="btn" type="submit" class="pure-button pure-button-primary">publish</button>
                </fieldset>
            </form>
        </div>
        <div class="pure-u-1-3"></div>
    </div>
    <script>
        btn = document.getElementById('btn');
        btn.addEventListener("click",
        function (evt) {
            evt.preventDefault();
            makePost();
        });
        function makePost() {
            var request = new Request('http://localhost:9001/api/v0/', {
                method: 'POST',
                body:JSON.stringify({
                    "title": document.getElementById('title').value,
                    "state": (document.getElementById('draft').checked)?'draft': 'published',
                    "text": document.getElementById('text').value,
                    "imagePath": "",
                    "authorId": 0
                }),
                headers: new Headers({
                    'Content-Type': 'application/json'
                })
            });

            fetch(request)
                .then(function (response) { return response.json()})
                .then(function (value) { console.log(value) })
                .catch(function (reason) { console.log(reason) })
        }
    </script>
</body>
</html>